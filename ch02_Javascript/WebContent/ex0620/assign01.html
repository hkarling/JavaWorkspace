<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        body {
            width: 600px;
            margin: auto;
            text-align:center;
        }
        table {
            width: 100%;
            border: 2px solid black;
        }
        th {
            width:40%;
            border: 1px solid black;
        }

        .innerEle {
            width: 100%;
            margin: 0px;
            box-sizing: border-box;
        }
    </style>
    <script>
        let tblMain; // 테이블 저장해놓을 변수
        let index = 0;

        /* 인서트 버튼 클릭 */
        function btnInsert() {
            let newRow = tblMain.insertRow(tblMain.length);
            
            /* 첫번째 셀 */
            let ele = document.createElement('input');
            ele.className = 'innerEle';
            ele.value = '이름이름이름';

            let col = newRow.insertCell(0);
            col.appendChild(ele);            

            /* 두번째 셀 */
            ele = document.createElement('input');
            ele.className = 'innerEle'
            ele.value = index++;

            col = newRow.insertCell(1);
            col.appendChild(ele);
            
            /* 세번째 셀 */
            ele = document.createElement('input');
            ele.type = 'button';
            ele.className = 'innerEle';
            ele.value = '삭제';
            ele.addEventListener('click', btnDelete);

            col = newRow.insertCell(2);
            col.appendChild(ele);
        }

        function btnDelete() {
            /*  이벤트가 발생한 버튼에서 역추적해서 tbody와 해당 tr을 찾아 저장한다.
                테이블에서부터 내려오면 이상한 text가 잡힐때가 있다. */
            var tbody = event.target.parentNode.parentNode.parentNode;
            var tr = event.target.parentNode.parentNode;

            /* 삭제 */
            tbody.removeChild(tr);
        }

        onload = function () {
            tblMain = document.getElementsByTagName('table')[0];
            document.getElementsByTagName('button')[0].addEventListener('click', btnInsert);
        }
    </script>
</head>
<body>
    <h1>테이블 동적 생성</h1>
    <button>Row 만들기</button>
    <table>
        <tr>
            <th> 이름 </th>
            <th> 나이 </th>
            <th> 삭제 </th>
        </tr>
    </table>
</body>
</html>